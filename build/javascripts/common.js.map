{"version":3,"sources":["common.js"],"names":["$","getCards","ajax","url","type","done","cards","cardsPagesCount","assignId","cardsArray","length","concat","cardsLoader","masonry","masonryConfig","isMasonryCreated","newCards","map","card","createCard","append","fn","fullpage","reBuild","reduceText","string","visibleSymbols","substring","lastIndex","index","id","heightCoefficient","imgHeight","imgWidth","img","name","lastName","description","get","resizeHandler","window","width","itemSelector","columnWidth","percentPosition","bloggerConfig","dots","arrows","infinite","vertical","speed","slidesToShow","slidesToScroll","prevArrow","nextArrow","dotsClass","responsive","breakpoint","settings","dreamersConfig","centerMode","variableWidth","scrollOverflow","navigation","slick","click","on"],"mappings":"AAAA,YAAAA,GAAE,WAwFE,QAASC,KACLD,EAAEE,MACEC,IAAK,8BACLC,KAAM,QACPC,KAAK,SAACC,GAIL,GAHAC,IACAD,EAAQE,EAASF,EAAOG,EAAWC,QACnCD,EAAaA,EAAWE,OAAOL,GAC3BA,EAAMI,OAAS,EAAG,CAClBE,EAAcZ,EAAE,mBAAmBa,QAAQC,GAC3CC,GAAmB,CACnB,IAAIC,GAAWV,EAAMW,IAAI,SAACC,GACtB,MAAOC,GAAWD,IAEtBN,GAAYQ,OAAOJ,GAAUH,QAAQ,WAAYG,GAAUH,QAAQ,eACnEb,EAAEqB,GAAGC,SAASC,cAEVR,KACAH,EAAYC,QAAQ,WACpBE,GAAmB,KAMnC,QAASS,GAAWC,GAIhB,MAHIA,GAAOf,OAASgB,IAChBD,EAASA,EAAOE,UAAU,EAAGD,GAAkB,QAE5CD,EAGX,QAASjB,GAASF,EAAOsB,GACrB,MAAOtB,GAAMW,IAAI,SAACC,EAAMW,GAEpB,MADAX,GAAKY,GAAK,SAAWF,EAAYC,EAAQ,GAClCX,IAIf,QAASC,GAAWD,GAChB,GAAIa,GAAoBb,EAAKc,UAAYd,EAAKe,QAC9C,OAAOjC,GACH,2BAA2BkB,EAAKY,GAAhC,gCAAA,gCAEgCZ,EAAKgB,IAFrC,QAAA,uCAAA,wBAIuBH,EAAoB,IAAMA,EAAoB,IAAM,QAJ3E,mBAAA,+BAAA,6BAM6Bb,EAAKiB,KANlC,oCAM0EjB,EAAKkB,SAN/E,kBAAA,oCAOoCZ,EAAWN,EAAKmB,aAPpD,uBAQFC,IAAI,GAKV,QAASC,KACDvC,EAAEwC,QAAQC,QAAU,KAGhB1B,GACAH,EAAYC,QAAQ,eAnJhC,GAAIE,IAAmB,EACnBH,EAAAA,OACAH,KACAK,GACA4B,aAAc,UACdC,YAAa,iBACbC,iBAAiB,GAEjBC,GACAC,MAAM,EACNC,QAAQ,EACRC,UAAU,EACVC,UAAU,EACVC,MAAO,IACPC,aAAc,EACdC,eAAgB,EAChBC,UAAW,wHACXC,UAAW,wHACXC,UAAW,8BACXC,aAEQC,WAAY,IACZC,UACIP,aAAc,EACdC,eAAgB,KAIpBK,WAAY,IACZC,UACIP,aAAc,EACdC,eAAgB,KAGpBK,WAAY,IACZC,UACIP,aAAc,EACdC,eAAgB,MAM5BO,GACAb,MAAM,EACNc,YAAY,EACZb,QAAQ,EACRC,UAAU,EACVE,MAAO,IACPC,aAAc,EACdU,eAAe,EACfR,UAAW,wHACXC,UAAW,wHACXE,aAEQC,WAAY,IACZC,UACIP,aAAc,KAIlBM,WAAY,IACZC,UACIP,aAAc,KAGlBM,WAAY,IACZC,UACIP,aAAc,MAK1B5C,EAAkB,EAEhBmB,EAAiB,EAEvB1B,GAAE,wBAAwBsB,UACtBwC,gBAAgB,EAChBC,YAAY,IAGhB9D,IACAD,EAAE,eAAegE,MAAMnB,GACvB7C,EAAE,eAAeiE,MAAMhE,GACvBD,EAAE,eAAegE,MAAML,GAuDvB3D,EAAEwC,QAAQ0B,GAAG,SAAU3B","file":"../sources/common.js","sourcesContent":["$(function () {\r\n    let isMasonryCreated = false;\r\n    let cardsLoader;\r\n    let cardsArray = [];\r\n    let masonryConfig = {\r\n        itemSelector: '.c-card',\r\n        columnWidth: '.c-card__sizer',\r\n        percentPosition: true\r\n    };\r\n    let bloggerConfig = {\r\n        dots: true,\r\n        arrows: true,\r\n        infinite: false,\r\n        vertical: false,\r\n        speed: 800,\r\n        slidesToShow: 4,\r\n        slidesToScroll: 4,\r\n        prevArrow: '<svg class=\"c-arrow c-arrow__prev\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#arrow-l\"></use></svg>',\r\n        nextArrow: '<svg class=\"c-arrow c-arrow__next\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#arrow-r\"></use></svg>',\r\n        dotsClass: 'slick-dots c-bloggers__dots',\r\n        responsive: [\r\n            {\r\n                breakpoint: 992,\r\n                settings: {\r\n                    slidesToShow: 3,\r\n                    slidesToScroll: 3\r\n                }\r\n            },\r\n            {\r\n                breakpoint: 767,\r\n                settings: {\r\n                    slidesToShow: 2,\r\n                    slidesToScroll: 2\r\n                }\r\n            }, {\r\n                breakpoint: 480,\r\n                settings: {\r\n                    slidesToShow: 1,\r\n                    slidesToScroll: 1\r\n                }\r\n            }\r\n        ]\r\n    };\r\n    \r\n    let dreamersConfig = {\r\n        dots: false,\r\n        centerMode: true,\r\n        arrows: true,\r\n        infinite: true,\r\n        speed: 500,\r\n        slidesToShow: 5,\r\n        variableWidth: true,\r\n        prevArrow: '<svg class=\"c-arrow c-arrow__prev\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#arrow-l\"></use></svg>',\r\n        nextArrow: '<svg class=\"c-arrow c-arrow__next\"><use xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href=\"#arrow-r\"></use></svg>',\r\n        responsive: [\r\n            {\r\n                breakpoint: 992,\r\n                settings: {\r\n                    slidesToShow: 3\r\n                }\r\n            },\r\n            {\r\n                breakpoint: 767,\r\n                settings: {\r\n                    slidesToShow: 2\r\n                }\r\n            }, {\r\n                breakpoint: 480,\r\n                settings: {\r\n                    slidesToShow: 1\r\n                }\r\n            }\r\n        ]\r\n    }\r\n    let cardsPagesCount = 1;\r\n\r\n    const visibleSymbols = 85;\r\n\r\n    $('.c-section-container').fullpage({\r\n        scrollOverflow: true,\r\n        navigation: true\r\n    });\r\n\r\n    getCards();\r\n    $('.c-bloggers').slick(bloggerConfig);\r\n    $('#more-cards').click(getCards);\r\n    $('.c-dreamers').slick(dreamersConfig);\r\n\r\n    function getCards() {\r\n        $.ajax({\r\n            url: 'http://127.0.0.1:3000/cards',\r\n            type: 'GET'\r\n        }).done((cards) => {\r\n            cardsPagesCount++;\r\n            cards = assignId(cards, cardsArray.length);\r\n            cardsArray = cardsArray.concat(cards);\r\n            if (cards.length > 0) {\r\n                cardsLoader = $('.c-cards-holder').masonry(masonryConfig);\r\n                isMasonryCreated = true;\r\n                let newCards = cards.map((card) => {\r\n                    return createCard(card);\r\n                });\r\n                cardsLoader.append(newCards).masonry('appended', newCards).masonry('reloadItems');\r\n                $.fn.fullpage.reBuild();\r\n            } else {\r\n                if (isMasonryCreated) {\r\n                    cardsLoader.masonry('destroy');\r\n                    isMasonryCreated = false;\r\n                }\r\n            }\r\n        })\r\n    }\r\n\r\n    function reduceText(string) {\r\n        if (string.length > visibleSymbols) {\r\n            string = string.substring(0, visibleSymbols) + ' ...';\r\n        }\r\n        return string;\r\n    }\r\n\r\n    function assignId(cards, lastIndex) {\r\n        return cards.map((card, index) => {\r\n            card.id = 'card-' + (lastIndex + index + 1);\r\n            return card;\r\n        })\r\n    }\r\n\r\n    function createCard(card) {\r\n        let heightCoefficient = card.imgHeight / card.imgWidth;\r\n        return $(\r\n            `<div class='c-card' id='${card.id}'>` +\r\n            `<div class='c-card__image'` +\r\n            `style='background-image: url(${card.img});'>` +\r\n            `<div class='c-card__image_embedded'` +\r\n            `style='padding-top: ${heightCoefficient ? 100 * heightCoefficient + '%' : '100%'};'></div></div>` +\r\n            `<div class='c-card__about'>` +\r\n            `<div class='c-card__name'>${card.name} <span class=\"c-card__last-name\">${card.lastName}</span></div>` +\r\n            `<div class=\"c-card__description\">${reduceText(card.description)}</div></div></div>`\r\n        ).get(0);\r\n    };\r\n\r\n    $(window).on('resize', resizeHandler);\r\n\r\n    function resizeHandler() {\r\n        if ($(window).width() > 767) {\r\n\r\n        } else {\r\n            if (isMasonryCreated) {\r\n                cardsLoader.masonry('reloadItems');\r\n            }\r\n        }\r\n    }\r\n});\r\n"]}